# services:
#     event.listener:
#         class: fibe\Bundle\WWWConfBundle\Listener\updateChildrenDate
#         arguments: ["@session"]
#         tags:
#             - { name: doctrine.event_listener, event: prePersist }
#             - { name: doctrine.event_listener, event: preUpdate }


services:
    emptyConf:
        class:        "fibe\\Bundle\\WWWConfBundle\\Services\\EmptyConf"

idci_exporter:
    api_route: "/api/{entity_reference}.{_format}"
    entities:
        schedule_event:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\ConfEvent"
            formats:
                csv:
                    transformer:
                        options:
                            header: "id;summary;createdAt;endAt;startAt;duration;lastModifiedAt;description;comment;url;organizer;contacts;location.id;location.name;location.description;categories;roles"
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"


        schedule_category:
            class: "IDCI\\Bundle\\SimpleScheduleBundle\\Entity\\Category"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"
        schedule_location:
            class: "IDCI\\Bundle\\SimpleScheduleBundle\\Entity\\Location"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"

        schedule_organization:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\Organization"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"

        schedule_paper:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\Paper"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"

        schedule_person:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\Person"
            formats:
                csv:
                    transformer:
                        options:
                            header: "id;firstName;familyName;description;page;image;roles;organizations;papers;accounts"
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"

        schedule_role:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\RoleType"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"

        schedule_theme:
            class: "IDCI\\Bundle\\SimpleScheduleBundle\\Entity\\Theme"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"

        schedule_topic:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\Topic"
            formats:
                jsonp:
                    transformer:
#                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.json.twig"
        WwwConf:
            class: "fibe\\Bundle\\WWWConfBundle\\Entity\\WwwConf"
            formats:
                xml:
                    transformer:
                        service: "idci_exporter.transformer_twig"
                        options:
#                            template_path:
                            template_name_format: "export.xml.twig"